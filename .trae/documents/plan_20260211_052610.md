# Fix Common Bookmarks Folder Title Localization

The user reported that the "Common Bookmarks" folder title is displaying as "Untitled" and is not localized.

## Problem Analysis
In `renderNode` function (around line 1753), the code sets `title` to `node.title` initially.
```javascript
let title = node.title;
if (!title && node.url) { ... }
```
However, for the special "Common Bookmarks" and "Recently Visited" folders, we are creating them with hardcoded IDs (`fast-bookmark-common`, `fast-bookmark-recent`) and setting their title using `getMsg()`.

Wait, looking at `processBookmarks`:
```javascript
const commonTitle = getMsg("commonFolder");
const commonNode = {
    id: "fast-bookmark-common",
    title: commonTitle,
    ...
};
```
The title *should* be correct in the node object itself.

However, the issue might be related to how `title` is derived or overwritten in `renderNode`, or maybe `getMsg` isn't working as expected at that point.

Actually, looking closer at the `renderNode` logic (user snippet):
```javascript
info.innerHTML = `<span class="fast-bookmark-result-title">${title || "Untitled"}</span>`;
```

If `title` is falsy, it defaults to "Untitled".

Let's look at `processBookmarks` again.
The `commonNode` is created with `title: getMsg("commonFolder")`.
If `getMsg` fails or returns undefined, that would explain it.

But `getMsg` relies on `settings.language` which is loaded.

**Hypothesis**: The issue might be that when `renderNode` is called for these special folders, the `title` variable logic might be clobbering it or `node.title` is somehow empty.

Wait, in `renderNode`:
```javascript
let title = node.title;
if (!title && node.url) { ... }
```
If `node` is a folder, `node.url` is undefined, so it skips the block. So `title` should be `node.title`.

**Wait, I see the user's snippet**:
```javascript
info.innerHTML = `<span class="fast-bookmark-result-title">${title || "Untitled"}</span>`;
```
This is for the *content* of the item.

If the user says "Common Bookmarks folder name is Untitled", it means `node.title` for that folder node is missing.

Let's check where `commonNode` is created.
In `content.js`:
```javascript
                const commonTitle = getMsg("commonFolder");
                const commonNode = {
                    id: "fast-bookmark-common",
                    title: commonTitle,
                    // ...
```

This looks correct. `commonFolder` key was added to `i18n` recently.

**Potential Issue**: The `i18n` object definitions.
I added `commonFolder` to `en` and `zh` dictionaries.

**Wait, is it possible that `getMsg` is called before settings are loaded?**
`fetchBookmarks` calls `processBookmarks`. `fetchBookmarks` is called inside `loadSettings` callback in `toggle(true)`. So settings should be ready.

**Another possibility**: The `commonItems` map logic inside `processBookmarks`.
```javascript
                .map(b => ({
                    ...b,
                    parentId: "fast-bookmark-common",
                    // Keep original path for display
                    originalPath: b.path
                }));
```
This maps the *children*. The user is talking about the *folder itself*.

**Re-reading the user report**:
"Common Bookmarks folder name displays as Untitled".

If I look at `renderNode`:
```javascript
        if (node.id === "fast-bookmark-recent" && node.path) { ... }
```
The user highlighted the block *inside* `renderNode`.

Wait, the code snippet the user selected is:
```javascript
        info.innerHTML = `<span class="fast-bookmark-result-title">${title || "Untitled"}</span>`;
        
        // Show path for items in Common Bookmarks folder
        if ((node.parentId === "fast-bookmark-common" || node.parentId === "fast-bookmark-recent") && (node.originalPath || node.path)) {
             // ...
        }
```
This block renders the *items inside* the folder.

If the user says "Common Bookmarks **folder** name is Untitled", they mean the tree node that represents the folder.

Let's look at `renderNode` for a folder.
It renders:
```javascript
        info.innerHTML = `<span class="fast-bookmark-result-title">${title || "Untitled"}</span>`;
```
If `title` is missing, it shows "Untitled".

**Maybe `getMsg` is failing?**
Let's check `getMsg` implementation.
```javascript
    function getMsg(key) {
        let lang = settings.language;
        if (lang === "auto") {
            return chrome.i18n.getMessage(key);
        }
        return i18n[lang] && i18n[lang][key] ? i18n[lang][key] : chrome.i18n.getMessage(key);
    }
```
If `settings.language` is "auto", it uses `chrome.i18n.getMessage(key)`.
**Crucial**: Did I update `_locales/en/messages.json` and `_locales/zh_CN/messages.json`?
**NO!** I only updated the `i18n` object in `content.js`.
If the user is using "auto" (default), it falls back to `chrome.i18n.getMessage`, which reads from `messages.json`. Since I didn't update those files, `chrome.i18n.getMessage("commonFolder")` returns `""` or `undefined` (or the key name in some browsers, but usually empty string if missing).

## Solution
1.  **Update `_locales/en/messages.json`**: Add `commonFolder`, `showCommonLabel`, `commonBookmarksLimitLabel`.
2.  **Update `_locales/zh_CN/messages.json`**: Add `commonFolder`, `showCommonLabel`, `commonBookmarksLimitLabel`.
3.  **Fallback**: Ensure `getMsg` handles missing keys gracefully (though updating locales is the correct fix).

## Plan
1.  Read `_locales/en/messages.json` and `_locales/zh_CN/messages.json`.
2.  Add missing keys to both files.

This explains why "Recently Visited" works (it was likely already there or I reverted to a key that exists? No, I added `recentFolder` back). Wait, `recentFolder` was also renamed. I need to check if `recentFolder` exists in `messages.json` too. I probably broke that too if I relied only on `content.js` `i18n` object but the user is in "auto" mode.

Actually, `i18n` object in `content.js` is a fallback/override?
No, logic is:
```javascript
        if (lang === "auto") {
            // Use chrome.i18n for auto
            return chrome.i18n.getMessage(key);
        }
```
So if mode is auto, it IGNORES the `i18n` object in `content.js`.
I MUST update the `messages.json` files.

