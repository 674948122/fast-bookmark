I will implement the folder sorting logic where a folder's weight is the sum of the visit frequencies of all its internal bookmarks.

**Revised Plan:**

1.  **Modify `content.js`**:
    *   **Add Weight Calculation Logic**:
        *   Create a function `calculateNodeWeight(node, counts, weightMap)` that recursively calculates weights.
        *   **Bookmark Weight**: Equals its visit count (`counts[node.id]`).
        *   **Folder Weight**: Equals the **sum of all its children's weights**. This ensures a folder's weight represents the total visit frequency of all bookmarks contained within it (including subfolders).
        *   Store these weights in a `weightMap`.
    *   **Update Sorting Logic (`sortBookmarkTree`)**:
        *   **Remove** the "Always keep folders at the top" restriction.
        *   **Sort Condition**: Sort all items (folders and files) purely by their calculated weight in descending order.
        *   **Recursion**: Continue to sort the contents of each folder recursively.

This ensures that folders are ranked according to the aggregate activity of their contents, mixing freely with individual bookmarks based on frequency.