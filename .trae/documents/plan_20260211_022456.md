# Recent Folder Items Enhancement Plan

I will modify the "Recently Visited" folder items to hide edit/delete actions and display the last visit time.

## 1. Disable Edit/Delete for Items in Recent Folder (`content.js`)
- **Logic**: In `renderNode`, check if the node's parent is the "Recently Visited" folder (`node.parentId === "fast-bookmark-recent"`).
- **Implementation**: Extend the existing check (that hides actions for the folder itself) to also hide actions for its children.
  - Condition: `if (node.id === "fast-bookmark-recent" || node.parentId === "fast-bookmark-recent")` -> hide actions.

## 2. Display Last Visit Time (`content.js`)
- **Data Source**: The `recentBookmarks` storage currently only stores URLs (`["url1", "url2", ...]`). It **does not** store timestamps.
- **Migration Required**: I need to change the data structure of `recentBookmarks` in `background.js` from `string[]` to `object[]` (e.g., `[{ url: "...", lastVisitTime: 123456789 }, ...]`).
  - **Backward Compatibility**: Handle the case where the stored data is still an array of strings.
- **Update `background.js`**:
  - In `openBookmark` handler: When adding to recent, store `{ url, lastVisitTime: Date.now() }`.
  - In `getRecent` handler: No change needed if it just returns the array, but `content.js` needs to handle objects.
- **Update `content.js`**:
  - In `fetchBookmarks`: Update how `recentUrls` is processed. It might receive objects now.
  - In `processBookmarks`:
    - Extract URL and timestamp from the recent list.
    - When creating `recentItems`, attach the `lastVisitTime` to the item node (e.g., `item.lastVisitTime = recentEntry.lastVisitTime`).
  - In `renderNode`:
    - If `node.parentId === "fast-bookmark-recent"` and `node.lastVisitTime` exists:
      - Format the timestamp (e.g., "Just now", "5 mins ago", or "YYYY-MM-DD HH:mm"). A relative time function is user-friendly.
      - Append this time info to the item's DOM (e.g., in a small span next to the URL or below the title).

## 3. UI Styling (`content.js` / Styles)
- Add a style for the timestamp (small font, gray color, right-aligned or inline).
- Ensure it fits within the item layout.

## 4. Verification
- Click a bookmark to add it to recent history with a timestamp.
- Open the sidebar and check the "Recently Visited" folder.
- Verify items show the relative time (e.g., "Just now").
- Verify items do not have edit/delete buttons.
- Verify old data (strings) doesn't break the extension (treat as "unknown time" or just don't show it).
