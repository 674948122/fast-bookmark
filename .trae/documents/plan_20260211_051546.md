# Separate "Recently Visited" and "Common Bookmarks" Features

The user clarified that "Recently Visited" (History-based) and "Common Bookmarks" (Frequency-based) are two distinct features. I previously conflated them.

## 1. Revert & Add Localization Strings (content.js)
*   **Restore**: `recentFolder` -> "Recently Visited" / "最近访问".
*   **Restore**: `showRecentLabel` -> "Show Recently Visited" / "显示最近访问".
*   **Add**: `commonFolder` -> "Common Bookmarks" / "常用书签".
*   **Add**: `showCommonLabel` -> "Show Common Bookmarks" / "显示常用书签".
*   **Keep**: `commonBookmarksLimitLabel`.

## 2. Update Settings UI (content.js)
*   **Restore**: Toggle for "Show Recently Visited" (`settings.showRecent`).
*   **Add**: Toggle for "Show Common Bookmarks" (`settings.showCommon`, default `true`).
*   **Keep**: Input for "Common Bookmarks Count" (`settings.commonBookmarksLimit`).

## 3. Update Data Logic (content.js)
*   **Fetch**: Ensure `bookmarkVisitCounts` is always fetched from `chrome.storage.local` in `fetchBookmarks`, regardless of sort order.
*   **Process (`processBookmarks`)**:
    1.  **Recently Visited Node**: Create from `response.recentBookmarks` (History data from background). Limit to 20 (hardcoded or reuse limit? Usually recent is fixed, let's stick to 20).
    2.  **Common Bookmarks Node**:
        *   Map all bookmarks to add `visitCount` from `counts`.
        *   Sort by `visitCount` descending.
        *   Filter out items with 0 visits? (User said "Common", usually implies used at least once. Or just top N). Let's filter `count > 0`.
        *   Slice top N based on `settings.commonBookmarksLimit`.
        *   **Important**: Ensure `path` is preserved for display.
    3.  **Insertion**: Insert both nodes (if enabled) at the top of the tree. Order: Common first, then Recent? Or User preference? I'll put **Common Bookmarks** first as requested ("在所有文件夹的前面增加...常用书签"), then **Recently Visited**.

## 4. Verification
*   Check if "Recently Visited" shows history-based items.
*   Check if "Common Bookmarks" shows frequency-based items.
*   Check if toggles work independently.
*   Check if paths are shown for Common Bookmarks.

## 5. File Changes
*   `content.js`: Main logic and UI updates.
*   `background.js`: No changes needed (History logic is already correct for "Recent").

