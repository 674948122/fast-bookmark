## 权限管理优化方案

### 1. 修改权限配置 (manifest.json)
- 将 `bookmarks` 和 `favicon` 从 `permissions` 列表移动到 `optional_permissions`。
- 这样可以实现“按需授权”，提升用户初始安装体验。

### 2. 增强触发逻辑 (background.js)
- 在 `chrome.action.onClicked` 的回调函数中，首先使用 `chrome.permissions.contains` 检查是否已拥有所需权限。
- 如果权限缺失，立即调用 `chrome.permissions.request`。
- 仅在权限确认后，才继续执行 `content.js` 的注入或侧边栏切换逻辑。

### 3. 代码健壮性优化
- 在 `background.js` 处理 `getBookmarks` 请求时，增加对 `chrome.bookmarks` 是否存在的检查，防止在未授权状态下调用导致报错。

## 预期效果
- 用户首次点击插件图标时，浏览器会弹出“请求读取书签”的提示。
- 只有用户点击“允许”后，侧边栏才会弹出并正确加载书签及图标。
- 符合 Chrome 应用商店的最佳实践，提高插件的合规性和用户信任度。