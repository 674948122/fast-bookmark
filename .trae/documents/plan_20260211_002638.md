# 添加背景透明度配置项计划

## 目标
允许用户自定义设置面板的背景透明度，默认 90%，范围 0%~100%。

## 实施步骤

### 1. 更新 `settings` 对象与初始化
- 在 `settings` 对象中添加 `backgroundOpacity` 属性，默认值为 `90`。
- 在 `loadSettings` 函数中，确保能从 `chrome.storage.sync` 正确读取该值。

### 2. 更新多语言资源 (`i18n`)
- 在 `i18n.en` 中添加 `opacityLabel: "Background Opacity"`。
- 在 `i18n.zh` 中添加 `opacityLabel: "背景透明度"`。

### 3. 修改 CSS 样式生成 (`updateStyles`)
- 计算透明度小数：`const opacity = (settings.backgroundOpacity !== undefined ? settings.backgroundOpacity : 90) / 100;`
- 更新 `--bg-color` CSS 变量，使用模板字符串拼接 `rgba` 值：
  ```javascript
  --bg-color: ${isDark ? `rgba(17, 24, 39, ${opacity})` : `rgba(255, 255, 255, ${opacity})`};
  ```

### 4. 更新设置面板 HTML
- 在 `#panel-width-slider` 的下方或上方，添加一个新的 `.settings-row`。
- 包含 `label` (data-i18n="opacityLabel")。
- 包含 `input type="range"`，`id="opacity-slider"`, `min="0"`, `max="100"`, `step="1"`, `value="${settings.backgroundOpacity || 90}"`。
- 包含显示数值的 `span`，`id="opacity-value"`。

### 5. 添加事件监听与保存逻辑
- 获取 `opacitySlider` 和 `opacityValue` 元素引用。
- 添加 `input` 事件监听器，实时更新 `opacityValue` 的文本内容。
- 在 `saveBtn` 的点击事件中，获取 slider 的值并更新到 `settings.backgroundOpacity`，同时保存到 `chrome.storage.sync`。

## 验证
- 检查设置面板是否出现新的滑块。
- 滑动滑块，数值是否跟随变化。
- 保存后，背景透明度是否正确应用。
- 重启插件/刷新页面，设置是否持久化。
